<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ZTCoreKit  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="ZTCoreKit  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">ZTCoreKit 1.1.10 Docs</a></p>
        <p class="header-right"><a href="https://github.com/zhortech/ztcorekit-ios-sdk"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">ZTCoreKit Reference</a>
        <img id="carat" src="img/carat.png" />
        ZTCoreKit  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Common.html">Common</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ZTCore.html">ZTCore</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTApi.html">ZTApi</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTSettings.html">ZTSettings</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Models.html">Models</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ZTActivity.html">ZTActivity</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTActivityComment.html">ZTActivityComment</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTActivitySummary.html">ZTActivitySummary</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTCharacteristic.html">ZTCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTDevice.html">ZTDevice</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTMediaFile.html">ZTMediaFile</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTMediaFileTemplate.html">ZTMediaFileTemplate</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTSegmentData.html">ZTSegmentData</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTSegmentData.html#/s:9ZTCoreKit13ZTSegmentDataC6StatusO">– Status</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTSegmentData.html#/s:9ZTCoreKit13ZTSegmentDataC9ChunkTypeO">– ChunkType</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTService.html">ZTService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTUserShoe.html">ZTUserShoe</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="ZTDevice.html">ZTDevice</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ZTDeviceInfo.html">ZTDeviceInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTProductType.html">ZTProductType</a>
              </li>
              <li class="nav-group-task">
                <a href="ZTDevice.html#/s:9ZTCoreKit17ZTProjectCodeTypeO">ZTProjectCodeType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTProductCodeType.html">ZTProductCodeType</a>
              </li>
              <li class="nav-group-task">
                <a href="ZTDevice.html#/s:9ZTCoreKit22ZTManufacturerCodeTypeO">ZTManufacturerCodeType</a>
              </li>
              <li class="nav-group-task">
                <a href="ZTDevice.html#/s:9ZTCoreKit17ZTProductTypeCodeO">ZTProductTypeCode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="ZTService.html">ZTService</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ZTPrimaryService.html">ZTPrimaryService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTInformationService.html">ZTInformationService</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="ZTCharacteristic.html">ZTCharacteristic</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ZTBatteryCharacteristic.html">ZTBatteryCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTCommandsCharacteristic.html">ZTCommandsCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTIndicateCharacteristic.html">ZTIndicateCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTNotifyCharacteristic.html">ZTNotifyCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTPairedSolesCharacteristic.html">ZTPairedSolesCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTTextCharacteristic.html">ZTTextCharacteristic</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/ZTActivitySummaryStatus.html">ZTActivitySummaryStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTBleManagerState.html">ZTBleManagerState</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTError.html">ZTError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTLogLevel.html">ZTLogLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums.html#/s:9ZTCoreKit8ZTPeriodO">ZTPeriod</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTScannerResult.html">ZTScannerResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums.html#/s:9ZTCoreKit20ZTGenderSizeCodeTypeO">ZTGenderSizeCodeType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums.html#/s:9ZTCoreKit18ZTUnitSizeCodeTypeO">ZTUnitSizeCodeType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/ZTBleManager.html">ZTBleManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTButtonlessDfuCharacteristic.html">ZTButtonlessDfuCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTDfuService.html">ZTDfuService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTFirmwareCharacteristic.html">ZTFirmwareCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTHardwareCharacteristic.html">ZTHardwareCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Other%20Classes.html#/s:9ZTCoreKit8ZTLoggerC">ZTLogger</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTManufacturerNameCharacteristic.html">ZTManufacturerNameCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTModelNumberCharacteristic.html">ZTModelNumberCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTPrimaryOldService.html">ZTPrimaryOldService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTSerialNumberCharacteristic.html">ZTSerialNumberCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTSignal.html">ZTSignal</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ZTSignalSubscription.html">ZTSignalSubscription</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Enums.html">Other Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Enums.html#/s:9ZTCoreKit14ZTActivityModeO">ZTActivityMode</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTCommand.html">ZTCommand</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTCommandStatus.html">ZTCommandStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Other%20Enums.html#/s:9ZTCoreKit19ZTDeviceActualStateO">ZTDeviceActualState</a>
              </li>
              <li class="nav-group-task">
                <a href="Other%20Enums.html#/s:9ZTCoreKit16ZTGenderCodeTypeO">ZTGenderCodeType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTLogCategory.html">ZTLogCategory</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTNotifyData.html">ZTNotifyData</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTNotifyData.html#/s:9ZTCoreKit12ZTNotifyDataO7GroupIDO">– GroupID</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ZTNotifyData.html#/s:9ZTCoreKit12ZTNotifyDataO15CommonMessageIdO">– CommonMessageId</a>
              </li>
              <li class="nav-group-task">
                <a href="Other%20Enums.html#/s:9ZTCoreKit10ZTServicesO">ZTServices</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/CBCharacteristic.html">CBCharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Data.html">Data</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Functions.html">Other Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Functions.html#/s:9ZTCoreKit2egoiyyAA8ZTSignalCyxG_xtlF">=&gt;(_:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Protocols.html#/s:9ZTCoreKit13ZTDfuDelegateP">ZTDfuDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ZTServiceProtocol.html">ZTServiceProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/ZTBatteryLevel.html">ZTBatteryLevel</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZTMessageActivity.html">ZTMessageActivity</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZTMessageBootloaderInfo.html">ZTMessageBootloaderInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZTMessageGeneralState.html">ZTMessageGeneralState</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZTMessageInactivityTimeout.html">ZTMessageInactivityTimeout</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZTMessageSoftware.html">ZTMessageSoftware</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ZTPairedDevice.html">ZTPairedDevice</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other%20Typealiases.html">Other Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other%20Typealiases.html#/s:9ZTCoreKit18ConnectResultBlocka">ConnectResultBlock</a>
              </li>
              <li class="nav-group-task">
                <a href="Other%20Typealiases.html#/s:9ZTCoreKit20ZTScannerResultBlocka">ZTScannerResultBlock</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='ztcorekit-sdk-for-ios' class='heading'>ZTCoreKit SDK for iOS</h1>

<p><a href="https://github.com/zhortech/ztcorekit-ios-sdk"><img src="https://img.shields.io/cocoapods/v/ZTCoreKit.svg" alt="CocoaPods"></a>
<a href="https://swift.org/package-manager/"><img src="https://rawgit.com/jlyonsmith/artwork/master/SwiftPackageManager/swiftpackagemanager-compatible.svg" alt="Swift Package Manager"></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a></p>

<p>The ZTCoreKit for iOS provides a library and documentation for developers to build connected mobile applications using Zhortech services and modules.</p>
<h2 id='toc' class='heading'>TOC</h2>

<p><a href="#installation">Installation</a></p>

<p><a href="#how-to-use-it">How to use it</a></p>

<ul>
<li><a href="#setup">Setup</a></li>
<li><a href="#scan">Scan</a></li>
<li><a href="#connect">Connect</a></li>
<li><a href="#listen">Listen</a></li>
<li><a href="#disconnection">Disconnection</a></li>
<li><a href="#observers">Observers</a></li>
<li><a href="#Autoconnection">Autoconnection</a></li>
</ul>

<p><a href="#documentation">Documentation</a></p>

<p><a href="#sample-application">Sample application</a></p>

<p><a href="#license">License</a></p>
<h2 id='installation' class='heading'>INSTALLATION</h2>

<p>To get started with the ZTCoreKit SDK for iOS, check out the <a href="https://github.com/zhortech/ztcorekit-ios-sdk/blob/master/README.md">Developer Guide for iOS</a>. You can set up the SDK and start building a new project, or you integrate the SDK in an existing project. You can also run the samples to get a sense of how the SDK works.</p>

<p>To use the ZTCoreKit SDK for iOS, you will need the following installed on your development machine:</p>

<ul>
<li>Xcode 11.0 or later</li>
<li>iOS 13 or later</li>
</ul>
<h2 id='include-the-sdk-for-ios-in-an-existing-application' class='heading'>Include the SDK for iOS in an Existing Application</h2>

<p>There is example project <a href="https://github.com/zhortech/ztexample-ios">example</a> applications which showcase how to use the ZTCoreKit SDK for iOS.  Please note that the code in these sample applications is not of production quality.</p>

<p>There are several ways to integrate the ZTCoreKit Mobile SDK for iOS into your own project:</p>

<ul>
<li><a href="https://cocoapods.org/">CocoaPods</a></li>
<li><a href="https://swift.org/package-manager/">Swift Package Manager</a></li>
</ul>

<p>You should use ONE and only one of these ways to import the ZTCoreKit Mobile SDK. Importing the SDK in multiple ways loads duplicate copies of the SDK into the project and causes compiler/linker errors.</p>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<ol>
<li><p>The ZTCoreKit Mobile SDK for iOS is available through <a href="http://cocoapods.org">CocoaPods</a>. If you have not installed CocoaPods, install CocoaPods by running the command:</p>
<pre class="highlight plaintext"><code>$ gem install cocoapods
$ pod setup
</code></pre>

<p>Depending on your system settings, you may have to use <code>sudo</code> for installing <code>cocoapods</code> as follows:</p>
<pre class="highlight plaintext"><code>$ sudo gem install cocoapods
$ pod setup
</code></pre></li>
<li><p>In your project directory (the directory where your <code>*.xcodeproj</code> file is), run the following to create a <code>Podfile</code> in your project.</p>
<pre class="highlight plaintext"><code>$ pod init
</code></pre></li>
<li><p>Edit the podfile to include the pods you want to integrate into your project.  For example, ZTCoreKit is <code>a must</code> framework and is required to connect to shoes. <code>ZTSafetyKit</code> is used when working with <code>Safety</code> products. As a result, your podfile might look something like this:</p>
<pre class="highlight plaintext"><code>target 'YourTarget' do
pod 'ZTCoreKit', :git =&gt; 'https://github.com/zhortech/ztcorekit-ios-sdk.git', :branch =&gt; 'master'
end
</code></pre>

<p>Please add post install script at the end of <code>Podfile</code> if there is problem to use  library:</p></li>
</ol>
<pre class="highlight ruby"><code><span class="n">post_install</span> <span class="k">do</span> <span class="o">|</span><span class="n">installer</span><span class="o">|</span>
    <span class="n">installer</span><span class="p">.</span><span class="nf">pods_project</span><span class="p">.</span><span class="nf">targets</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">target</span><span class="o">|</span>
      <span class="n">target</span><span class="p">.</span><span class="nf">build_configurations</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
        <span class="n">config</span><span class="p">.</span><span class="nf">build_settings</span><span class="p">[</span><span class="s1">'BUILD_LIBRARY_FOR_DISTRIBUTION'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'YES'</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre>

<p>For a complete list of our pods, check out the .podspec files in the root directory of this project.</p>

<ol>
<li><p>Then run the following command:</p>
<pre class="highlight plaintext"><code>$ pod install --repo-update
</code></pre></li>
<li><p>To open your project, open the newly generated <code>*.xcworkspace</code> file in your project&rsquo;s directory with XCode. </p>

<p><strong>Note</strong>: Do <strong>NOT</strong> use <code>*.xcodeproj</code>. If you open up a project file instead of a workspace, you may receive the following error:</p>
<pre class="highlight plaintext"><code>ld: library not found for -lPods-ZTCoreKit
clang: error: linker command failed with exit code 1 (use -v to see invocation)
</code></pre></li>
</ol>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<ol>
<li>The <a href="https://swift.org/package-manager/">Swift Package Manager</a> is a tool for automating the distribution of Swift code and is integrated into the <code>swift</code> compiler.
Xcode with Swift tools version of 5.3 is required for ZTCoreKit. Earlier Xcode versions don&rsquo;t support Swift packages with resources.
To check your current Swift tools version run in your terminal:</li>
</ol>
<pre class="highlight ruby"><code><span class="n">xcrun</span> <span class="n">swift</span> <span class="o">-</span><span class="n">version</span>
</code></pre>

<blockquote>
<p>NOTE: In some cases you can have multiple Swift tools versions installed.</p>
</blockquote>

<p>Follow the official Apple SPM guide <a href="https://developer.apple.com/documentation/xcode/adding_package_dependencies_to_your_app">instructions</a> for more details.\n  </p>

<ol>
<li><p>To use Swift Package Manager, in Xcode add the <a href="https://github.com/zhortech/ztcorekit-ios-sdk">https://github.com/zhortech/ztcorekit-ios-sdk</a> dependency and choose the <code>Exact</code> version.</p>

<p align="center">
<img src="readme-images/ZTCoreKit_SPM_1.jpg" width="70%">
</p></li>
<li><p>Set your project Target if not preselected :</p></li>
</ol>

<p align="center">
<img src="readme-images/ZTCoreKit_SPM_2.jpg" width="70%">
</p>

<ol>
<li>Select your target and note that <code>ZTCoreKit</code> is automatically linked as a framework to your project target. Done!</li>
</ol>

<p align="center">
<img src="readme-images/ZTCoreKit_SPM_3.jpg" width="70%">
</p>
<h3 id='frameworks' class='heading'>Frameworks</h3>

<ol>
<li><p>Download the <a href="https://github.com/zhortech/ztcorekit-ios-sdk/latest/ztsafetykit-sdk.zip">latest SDK</a>.</p></li>
<li><p>With your project open in Xcode, select your <strong>Target</strong>. Under <strong>General</strong> tab, find <strong>Embedded Binaries</strong> and then click the <strong>+</strong> button.</p></li>
<li><p>Click the <strong>Add Other&hellip;</strong> button, navigate to the <code>ZTCoreKit.framework</code> file and select it. Check the <strong>Destination: Copy items if needed</strong> checkbox when prompted.  Add the frameworks that you need for you specific use case.  For example, if you are using ZTCoreKit, you will want to add the following framework:</p></li>
</ol>
<pre class="highlight plaintext"><code>* `ZTCoreKit.framework`
</code></pre>

<ol>
<li><p>Under the <strong>Build Phases</strong> tab in your <strong>Target</strong>, click the <strong>+</strong> button on the top left and then select <strong>New Run Script Phase</strong>. Then setup the build phase as follows. Make sure this phase is below the <code>Embed Frameworks</code> phase.</p>
<pre class="highlight plaintext"><code>Shell /bin/sh

bash "${BUILT_PRODUCTS_DIR}/${FRAMEWORKS_FOLDER_PATH}/ZTCoreKit.framework/strip-frameworks.sh"

Show environment variables in build log: Checked
Run script only when installing: Not checked

Input Files: Empty
Output Files: Empty
</code></pre></li>
</ol>
<h2 id='update-the-sdk-to-a-newer-version' class='heading'>Update the SDK to a Newer Version</h2>

<p>When we release a new version of the SDK, you can pick up the changes as described below.</p>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<ol>
<li><p>Run the following command in your project directory. CocoaPods automatically picks up the new changes.</p>
<pre class="highlight plaintext"><code>$ pod update
</code></pre>

<p><strong>Note</strong>: If your pod is having an issue, you can delete <code>Podfile.lock</code> and <code>Pods/</code> then run <code>pod install</code> to cleanly install the SDK.</p>

<p><img src="readme-images/cocoapods.png?raw=true" alt="image"></p></li>
</ol>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<ol>
<li>You can update to the latest version of any packages you depend on at any time by selecting File ▸ Swift Packages ▸ Update to Latest Package Versions.</li>
</ol>
<h3 id='frameworks' class='heading'>Frameworks</h3>

<ol>
<li>In Xcode&rsquo;s <strong>Project Navigator</strong>, type &ldquo;ZT&rdquo; to find the ZT frameworks that were manually added to your project.  Manually select all of the ZT frameworks and hit <strong>delete</strong> on your keyboard. Then select <strong>Move to Trash</strong>.  If you were following the example from above which uses ZTSafetyKit, you would remove:</li>
</ol>
<pre class="highlight plaintext"><code>* `ZTCoreKit.framework`
* `ZTSafetyKit.framework`
</code></pre>

<ol>
<li>Follow the installation process above to include the new version of the SDK.</li>
</ol>
<h2 id='how-to-use-it' class='heading'>HOW TO USE IT</h2>
<h3 id='getting-started' class='heading'>Getting Started</h3>

<ol>
<li><p>Import the ZTCoreKit header in the application delegate.</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">ZTCoreKit</span>
</code></pre></li>
<li><p>Create a default service configuration by adding the following code snippet in the <code>application:didFinishLaunchingWithOptions:</code> application delegate method.</p>
<pre class="highlight swift"><code>    <span class="kt">ZTSettings</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">environment</span> <span class="o">=</span> <span class="o">.</span><span class="n">dev</span> <span class="c1">//should be changed according to current environment (.dev / .staging / .production / )</span>
    <span class="kt">ZTCore</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">setup</span><span class="p">(</span><span class="nv">apiKey</span><span class="p">:</span> <span class="err">'</span><span class="kt">YOUR_KEY</span><span class="err">'</span><span class="p">,</span>
                    <span class="nv">secret</span><span class="p">:</span> <span class="err">'</span><span class="kt">YOUR_SECRET</span><span class="err">'</span><span class="p">,</span>
                    <span class="nv">appId</span><span class="p">:</span> <span class="err">'</span><span class="kt">YOUR_APPLICATION_ID</span><span class="err">'</span><span class="p">)</span>
</code></pre></li>
<li><p>User identification.
Application has to identify user before using core feature. Usually it is done after signup or signin so unique userId can be passed to backend together with user attributes (like name, email or other attributes)
<code>ZTApi.shared.linkUser(userId: String, attributes: [String: Any]])</code></p></li>
</ol>

<p>It will create user object in portal for new user or associate user with current session to allows viewing activities in future.</p>

<p><strong>Note</strong>: Most of the service client classes have a singleton method to get a default instance. The naming convention is <code>.shared</code> (e.g. <code>ZTCore.shared</code> in the above code snippet). This singleton method creates a service client with <code><a href="Classes/ZTSettings.html">ZTSettings</a></code>, which you set up in step 2, and maintains a strong reference to the client.</p>
<h3 id='scan' class='heading'>Scan</h3>

<p>You can scan for certain product type <code><a href="Enums/ZTProductType.html">ZTProductType</a></code>. 
New peripheral is returned in callback <code><a href="Other%20Typealiases.html#/s:9ZTCoreKit18ConnectResultBlocka">ConnectResultBlock</a></code> when it is discovered:</p>
<pre class="highlight swift"><code>        <span class="kt">ZTCore</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">scan</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">safety</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
            <span class="nf">debugPrint</span><span class="p">(</span><span class="s">"new device discovered:</span><span class="se">\(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">device</span><span class="p">)</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
</code></pre>

<p>The scan process is automatically stopped once you start the connection command. To stop scanning call <code>stopScan</code>:</p>
<pre class="highlight swift"><code>        <span class="kt">ZTCore</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">stopScan</span><span class="p">()</span>
</code></pre>
<h3 id='connect' class='heading'>Connect</h3>

<p>There are 2 ways to connect to peripheral.</p>

<p>You can connect using QR code or data matrix code with or without a timeout set, after a timeout you receive a <code>.timeout</code> error. </p>
<pre class="highlight swift"><code>        <span class="kt">ZTCore</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">connectWithCode</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="nv">timeout</span><span class="p">:</span> <span class="mi">15</span><span class="p">)</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
            <span class="k">if</span> <span class="n">error</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
                <span class="nf">debugPrint</span><span class="p">(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">error</span><span class="p">))</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nf">debugPrint</span><span class="p">(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">device</span><span class="p">))</span>
            <span class="p">}</span>
        <span class="p">}</span>
</code></pre>

<p>You can connect using <code><a href="Classes/ZTDevice.html">ZTDevice</a></code> instance obtained during scanning. You will receive error if there is timeout, issue with BLE connection or device has activity running.</p>
<pre class="highlight swift"><code>        <span class="kt">ZTCore</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="nf">connectWithDevice</span><span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="nv">timeout</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="k">self</span><span class="p">]</span> <span class="p">(</span><span class="n">device</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
            <span class="k">if</span> <span class="n">error</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
                <span class="nf">debugPrint</span><span class="p">(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">error</span><span class="p">))</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nf">debugPrint</span><span class="p">(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">device</span><span class="p">))</span>
            <span class="p">}</span>
        <span class="p">}</span>
</code></pre>
<h3 id='disconnection' class='heading'>Disconnection</h3>

<p>Disconnection can be explicit or unexpected.
If you need to disconnect from peripheral, use this method:</p>
<pre class="highlight swift"><code> <span class="n">device</span><span class="o">.</span><span class="nf">disconnect</span><span class="p">()</span>
</code></pre>

<p>Unexpected can be due for different reasons: device out of range, low battery, device reset etc</p>
<h2 id='observers' class='heading'>Observers</h2>
<h3 id='connection-observer' class='heading'>Connection observer</h3>

<p><em>Connection event observer</em>:
The <code>ZTCore.shared.bleManager.onDeviceStateChange</code> informs you about change in a device connection state.</p>

<p>A connection event is defined by different states:</p>

<ul>
<li>a peripheral was connected after a <code>connect</code> command or after automatic reconnection</li>
<li>when there is error occurred during a connection</li>
<li>when a peripheral was disconnected</li>
</ul>
<h3 id='ble-observer' class='heading'>BLE observer</h3>

<p><em>Bluetooth state event observer</em>:
The <code>ZTCore.shared.bleManager.onBluetoothStateChange</code> informs you about change in a device connection state.</p>

<p><em>Bluetooth device discovery observer</em>:
The <code>ZTCore.shared.bleManager.onDeviceDiscovered</code> informs you about discovering new ZTDevice.</p>
<h3 id='autoconnection' class='heading'>Autoconnection</h3>

<p>The autoconnection is managed by the <code>ZTSettings.shared.autoConnect</code> configuration.</p>

<p>Autoconnection may not work if application has no Bluetooth permission to run in background.</p>
<h3 id='logging' class='heading'>Logging</h3>

<p>As of version 0.0.30 of this SDK, logging can be controlled by setting approriate logging level. It allows to see network requests and additional information from ZTCoreKit.</p>
<h3 id='changing-log-levels' class='heading'>Changing Log Levels</h3>

<p><strong>Swift</strong></p>
<pre class="highlight swift"><code><span class="kt">ZTSettings</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">logLevel</span> <span class="o">=</span> <span class="o">.</span><span class="n">info</span>
</code></pre>

<p>The following logging level options are available:</p>

<ul>
<li><code>.all</code></li>
<li><code>.debug</code></li>
<li><code>.info</code></li>
<li><code>.error</code></li>
<li><code>.fatal</code></li>
</ul>

<p>We recommend setting the log level to <code>.error</code> before publishing to the Apple App Store.</p>
<h2 id='documentation' class='heading'>DOCUMENTATION</h2>

<p>Jazzy doc is available <a href="https://github.com/zhortech/ztcorekit-ios-sdk/docs/index.html">here</a></p>
<h2 id='sample-application' class='heading'>SAMPLE APPLICATION</h2>

<p>A sample application can be download <a href="https://github.com/zhortech/ztcorekit-ios-sdk/ztexample">here</a>. </p>
<h2 id='talk-to-us' class='heading'>Talk to Us</h2>

<p>Visit Gitlab <a href="https://github.com/zhortech/ztcorekit-ios-sdk/-/issues">Issues</a> to leave feedback or create any issue.</p>
<h2 id='author' class='heading'>Author</h2>

<p>Zhortech</p>
<h2 id='license' class='heading'>License</h2>

<p>See the <strong>LICENSE</strong> file for more info.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2021 <a class="link" href="https://zhortech.com" target="_blank" rel="external">Zhortech</a>. All rights reserved. (Last updated: 2021-10-01)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.7</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
